/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: 
@author: 
@tags: []
@addedOn: 2024-00-00
*/

const player = "p";
const wall = "w";

const laserVert = "v";
const laserVertOff = "o";

const laserHorz = "h";
const laserHorzOff = "f";

setLegend(
  [ player, bitmap`
................
................
................
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
...666666666....
................
................
................` ],
  [ wall, bitmap`
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000` ],
  [ laserVert, bitmap`
................
................
................
................
................
L..............L
L1............1L
L13333333333331L
L1............1L
L..............L
................
................
................
................
................
................`],
  [ laserVertOff, bitmap`
................
................
................
................
................
L..............L
L1............1L
L1............1L
L1............1L
L..............L
................
................
................
................
................
................`],
  [ laserHorz, bitmap`
......LLLLL.....
.......111......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
........3.......
.......111......
......LLLLL.....`],
  [ laserHorzOff, bitmap`
......LLLLL.....
.......111......
................
................
................
................
................
................
................
................
................
................
................
................
.......111......
......LLLLL.....`],
  

)

setSolids([player, wall]);

let level = 0
const levels = [
  map`
ww...w...w..
...w.wwwww.w
.w.w...h....
wwvwwwwwwww.
...w.h......
.www.wwwwvww
...w.w..w.w.
..pw.ww...w.
wwww.wwww...
........wwww`
]

setMap(levels[level])

setPushables({
  [ player ]: []
})

// inputs for player movement control
onInput("w", () => {
  getFirst(player).y -= 1; 
});

onInput("a", () => {
  getFirst(player).x -= 1;
});

onInput("s", () => {
  getFirst(player).y += 1;
});

onInput("d", () => {
  getFirst(player).x += 1;
});


afterInput(() => {
})


const updateGame = () => {
  let sprites = getAll("h");

  // Convert each sprite to the new version
  sprites.forEach(sprite => {
    // Update the sprite type to the new version
    sprite.type = "f";
  });
}

// Set up game loop to update every 1000 milliseconds (1 second)
const gameLoop = setInterval(updateGame, 1000);
